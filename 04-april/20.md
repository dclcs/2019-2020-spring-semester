# April 20, 2020

## SE-213

### Homework

![image-20200420080355346](20.assets/image-20200420080355346.png)

### a White Box

相比黑盒测试，我们能得到关于程序代码、流程的更多信息。这些信息能够让我们

![image-20200420080947741](20.assets/image-20200420080947741.png)

比如，C~mcc~ 就要求将所有条件的组合都穷尽。

实际上呢，只需要 4 枚测试用例就可以覆盖这 8 种情况。

![image-20200420081106314](20.assets/image-20200420081106314.png)

* 条件覆盖：每种条件分支都被执行到。
* 分支覆盖：每个判断分支的 YES 和 NO 分支都被执行到。
* 多条件覆盖：每种条件分支的组合都被执行到。

### Circulation

一般的程序都会包括「循环」。

怎么对他们进行测试？

首先，循环就分为很多种：

* 单循环（一个简单的循环）
* 嵌套循环（循环里面套循环）
* 级联循环
* 不规则循环（老实交代，你是不是用 `goto` 了？）

![image-20200420081808007](20.assets/image-20200420081808007.png)

![image-20200420082007522](20.assets/image-20200420082007522.png)

![image-20200420082013669](20.assets/image-20200420082013669.png)

### McCabe

#### 基路径

![image-20200420082843541](20.assets/image-20200420082843541.png)

类比「基向量」之于「向量空间」，「基路径」之于「程序路径」就是程序图中相互独立的一组路径，使得整个程序中的任意路径都可以由基路径组合得到。

#### McCabe 计算

$V(G) = e - n + 2p$。

$e$ 是边数；$n$ 是节点数；$p$ 是连通区域数。

![image-20200420083934254](20.assets/image-20200420083934254.png)

比如这个图，$V(G) = 10 - 7 + 2p = 5$。

> 有的书也认定 $V(G) = e - n + p$。也没问题。只不过，这个公式要求图是**强连通图**（任意两个节点之间都存在路径）才能用。

#### 基本路径

怎么确定基本路径啊？

是一个搜索法。

从起点到终点去找。

以这张图为例：![image-20200420084431486](20.assets/image-20200420084431486.png)

* ABCG
* ABCBCG
* ABEFG
* ADEFG
* ADFG

所有的其他路径都可以用这五条路径组合（并清除循环）之后得到。

* 路径加：一条路径後面接一条路径
* 路径乘：路径重复
* 路径减：数学上除去对应的边（没有实际意义）

![image-20200420090259328](20.assets/image-20200420090259328.png)

找起来很容易：因为已经知道数量了（就是整个空间的维数，用 McCabe 度计算公式），然後就用 DFS 或者 BFS 等图遍历的方法就能找出来了。

> 一般来说，一个单元模块的最大复杂度 $V(G)$ 不能超过 10。否则太复杂就没法测了。

![image-20200420091057436](20.assets/image-20200420091057436.png)

### Data Flow Testing

从关注程序中的数据及其使用的角度，设计测试用例。

跟路径测试覆盖很像，但是关心的是「数据变量」而非「程序结构」。

![image-20200420091532071](20.assets/image-20200420091532071.png)

> 梦回 Compilers

![image-20200420091800903](20.assets/image-20200420091800903.png)

一个变量的活跃范围是其第一次被 `DEF` 到其下一次被 `DEF` 之内最后一次 `USE` 的这个程序区间。

要整理出数据流，先把所有的变量写出来，然後把所有的 `DEF` 和 `USE` 都写出来。

注意，有些语句会同时进行 `DEF` 和 `USE`（但一般是先 `USE` 再 `DEF`），例如自增语句。所以要注意些好。

![image-20200420094016245](20.assets/image-20200420094016245.png)

